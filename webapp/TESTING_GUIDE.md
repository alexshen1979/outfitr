# OUTFITR 测试指南

## 服务器状态

### 后端服务器
- **状态**: ✅ 运行中
- **地址**: http://localhost:3001
- **健康检查**: http://localhost:3001/health
- **API基础路径**: http://localhost:3001/api/v1

### 前端服务器
- **状态**: ✅ 运行中
- **地址**: http://localhost:3000
- **环境变量**: 已配置 (.env.local)

## 测试流程

### 1. 基础功能测试

#### 1.1 访问首页
- 打开浏览器访问: http://localhost:3000
- 预期: 看到欢迎页面，显示"欢迎使用 OUTFITR"

#### 1.2 用户注册
- 访问: http://localhost:3000/register
- 测试步骤:
  1. 输入邮箱（如: test@example.com）
  2. 输入密码（至少8位）
  3. 可选输入昵称
  4. 点击"创建账户"
- 预期: 注册成功，自动跳转到首页

#### 1.3 用户登录
- 访问: http://localhost:3000/login
- 测试步骤:
  1. 输入注册时的邮箱和密码
  2. 点击"登录"
- 预期: 登录成功，显示用户信息

### 2. 核心功能测试

#### 2.1 衣柜管理
- 访问: http://localhost:3000/wardrobe（需要登录）
- 测试步骤:
  1. 点击"添加物品"
  2. 上传一张服装图片
  3. 填写物品信息（名称、类别、季节、风格）
  4. 保存
  5. 查看物品列表
  6. 删除一个物品
- 预期: 可以成功添加、查看、删除衣柜物品

#### 2.2 用户照片管理
- 测试步骤:
  1. 在衣柜页面或穿搭生成页面
  2. 上传一张个人照片（用于穿搭效果生成）
  3. 查看已上传的照片列表
- 预期: 可以成功上传和查看个人照片

#### 2.3 穿搭生成
- 访问: http://localhost:3000/outfit/generate（需要登录）
- 测试步骤:
  1. 选择一张个人照片
  2. 选择一个或多个衣柜物品
  3. 点击"生成穿搭"
  4. 等待AI处理（可能需要一些时间）
  5. 查看生成的穿搭效果图
- 预期: 可以成功生成穿搭效果图

### 3. API接口测试

#### 3.1 健康检查
```bash
curl http://localhost:3001/health
```
预期返回: `{"status":"ok","message":"OUTFITR Backend API is running"}`

#### 3.2 用户注册API
```bash
curl -X POST http://localhost:3001/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"test123456","nickname":"Test User"}'
```

#### 3.3 用户登录API
```bash
curl -X POST http://localhost:3001/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"test123456"}'
```

### 4. 国际化测试

#### 4.1 语言切换
- 在导航栏找到语言切换器
- 切换中英文
- 预期: 页面文字立即切换语言

#### 4.2 自动语言检测
- 清除浏览器缓存和localStorage
- 刷新页面
- 预期: 根据浏览器语言自动选择语言

## 测试检查清单

### 前端功能
- [ ] 首页正常显示
- [ ] 用户注册功能正常
- [ ] 用户登录功能正常
- [ ] 衣柜管理功能正常
- [ ] 图片上传功能正常
- [ ] 穿搭生成功能正常
- [ ] 语言切换功能正常
- [ ] 导航栏功能正常
- [ ] 响应式设计正常（移动端）

### 后端API
- [ ] 健康检查接口正常
- [ ] 用户注册接口正常
- [ ] 用户登录接口正常
- [ ] 图片上传接口正常
- [ ] 衣柜管理接口正常
- [ ] 穿搭生成接口正常
- [ ] JWT认证正常
- [ ] 错误处理正常

### 数据库
- [ ] 用户数据正确保存
- [ ] 衣柜物品数据正确保存
- [ ] 用户照片数据正确保存
- [ ] 穿搭结果数据正确保存
- [ ] 数据关联正确

## 常见问题排查

### 前端无法连接后端
1. 检查后端是否运行: http://localhost:3001/health
2. 检查前端.env.local文件中的API_URL配置
3. 检查浏览器控制台是否有CORS错误

### 图片上传失败
1. 检查后端uploads目录是否存在
2. 检查文件大小是否超过限制
3. 检查文件格式是否支持

### 数据库连接失败
1. 检查后端.env文件中的数据库配置
2. 检查数据库服务器是否可访问
3. 检查数据库表是否已创建

### 穿搭生成失败
1. 检查AI服务配置（AI_API_KEY和AI_API_ENDPOINT）
2. 检查API使用限制
3. 查看后端日志

## 测试数据建议

### 测试用户
- 邮箱: test@example.com
- 密码: test123456

### 测试图片
- 使用清晰的服装照片（建议尺寸: 800x600以上）
- 使用清晰的人物照片（建议尺寸: 800x600以上）

## 性能测试

### 响应时间
- API响应时间应 < 500ms（除AI生成外）
- 页面加载时间应 < 2s
- 图片上传应 < 5s（取决于文件大小）

### 并发测试
- 测试多个用户同时注册
- 测试多个用户同时上传图片
- 测试多个用户同时生成穿搭

## 下一步

测试完成后，如果发现问题，请记录：
1. 问题描述
2. 复现步骤
3. 预期行为
4. 实际行为
5. 浏览器控制台错误（如有）
6. 后端日志错误（如有）

